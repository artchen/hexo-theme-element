<!-- Universal Search -->

<script type="text/javascript">
  var GOOGLE_CUSTOM_SEARCH_API_KEY = "<%- theme.search.google_api_key %>";
  var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "<%- theme.search.google_engine_id %>";
  var ALGOLIA_API_KEY = "<%- theme.search.algolia_api_key %>";
  var ALGOLIA_APP_ID = "<%- theme.search.algolia_app_id %>";
  var ALGOLIA_INDEX_NAME = "<%- theme.search.algolia_index_name %>";
  var AZURE_SERVICE_NAME = "<%- theme.search.azure_service_name %>";
  var AZURE_INDEX_NAME = "<%- theme.search.azure_index_name %>";
  var AZURE_QUERY_KEY = "<%- theme.search.azure_query_key %>";
  var BAIDU_API_ID = "<%- theme.search.baidu_api_id %>";
  var SEARCH_SERVICE = "<%- theme.search.service %>";
  var universalSearchConfig = {};
  if (SEARCH_SERVICE === 'google') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      apiKey: GOOGLE_CUSTOM_SEARCH_API_KEY,
      engineId: GOOGLE_CUSTOM_SEARCH_ENGINE_ID,
      imagePath: "/img/"
    };
  } else if (SEARCH_SERVICE === 'algolia') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      apiKey: ALGOLIA_API_KEY,
      appId: ALGOLIA_APP_ID,
      indexName: ALGOLIA_INDEX_NAME,
      imagePath: "/img/"
    };
  } else if (SEARCH_SERVICE === 'azure') {
    universalSearchConfig = {
      searchService: SEARCH_SERVICE,
      serviceName: AZURE_SERVICE_NAME,
      indexName: AZURE_INDEX_NAME,
      apiKey: AZURE_QUERY_KEY,
      imagePath: "/img/"
    };
  }
</script>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.js"><\/script>')</script>

<%- js('js/search.js') %>
<%- js('js/app.js') %>

<!-- Disqus -->

<% if (theme.disqus_shortname || config.disqus_shortname){ %>
<script type="text/javascript">
  var disqus_shortname = '<%= theme.disqus_shortname || config.disqus_shortname %>';
  <% if (page.permalink){ %>
  var disqus_url = '<%= page.permalink %>';
  <% } %>
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/<% if (page.comments) { %>embed.js<% } else { %>count.js<% } %>';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<% } %>

<!-- Valine -->
<% if (theme.valine.enable && theme.valine.appid && theme.valine.appkey){ %>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
<script type="text/javascript">
  var GUEST = ['nick','mail','link'];
  var guest = '<%= theme.valine.guest_info %>';
  guest = guest.split(',').filter(function (item) {
    return GUEST.indexOf(item)>-1;
  });
  new Valine({
    el: '#comments' ,
    verify: <%= theme.valine.verify %>,
    notify: <%= theme.valine.notify %>,
    appId: '<%= theme.valine.appid %>',
    appKey: '<%= theme.valine.appkey %>',
    placeholder: '<%= theme.valine.placeholder %>',
    avatar:'<%= theme.valine.avatar %>',
    meta: guest,
    pageSize: <%= theme.valine.pageSize %> || 10,
    visitor: <%= theme.valine.visitor %>
  });
</script>
<% } %>

<!-- Swiftype -->
<!-- Please replace with your own swiftype settings -->
<!--
<script type="text/javascript">
  /* Swiftype */
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','FHMeAyBdVccJECstf-XJ','2.0.0');
</script>
-->
